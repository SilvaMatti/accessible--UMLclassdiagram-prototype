<!-- fixing navigation from merged cell to merged cell-->
<!-- up and down working all borders working and left and right working.. Perfect-->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/styles.css">

	<title>Bootstrap</title>

</head>
<body>
<!-- progress bar-->
<div class="services container">
	<h1>Accessiable UML</h1>
	<div class="progress">
		<div class="progress-bar progress-bar-success" style="width: 25%">
	  	</div>
	  	<div class="progress-bar progress-bar-success" style="width: 25%">
	 	</div>
	 	<div class="progress-bar progress-bar-success" style="width: 25%">
	 	3/4
	 	</div>
	</div>
<!-- images -->
	<div class="focusable" tabindex="-1">
		<div class="row">
			<section class="col-md-3 focusable"  id="unscripted">
				<img class="icon" src="images/training.png">
				<b>Training Session</b>
			</section>
			<section class="col-md-3" id="scripted">
				<img class="icon" src="images/uml-512.png">
				<b>First Session</b>
			</section>
			</section>
			<section class="col-md-3" id="scripted1" >
				<img class="icon" src="images/uml-512.png">
				<b>Second Session</b>
			</section>
			</section>
			<section class="col-md-3" id="scripted2">
				<img class="icon" src="images/logout-128.png">
				<b>Debriefing Session</b>
			</section>
		</div>		
	</div>
	<!--images-->
	<div class="focusable" tabindex="1">
		<table  id = "uml" class="focusable tablegrid" tabindex="-1" border="1">
		<caption>you will start at top left</caption>
        <tr id = "row1">
            <td class="focusable row1 col1 col2 focused" tabindex="-1" colspan="2"><img src="images/Ssession/S11.JPG" alt="this is silva"></td>
            <td class="focusable row1 col3 " tabindex="-1"><img src="images/Ssession/S13.JPG" alt="this is silva"></td>
            <td class="focusable row1 col4 " tabindex="-1"><img src="images/Ssession/S14.JPG" alt="this is silva"></td>
            <td class="focusable row1 col5 " tabindex="-1"><img src="images/Ssession/S15.JPG" alt="this is silva"></td>
            <td class="focusable row1 col6 " tabindex="-1"><img src="images/Ssession/S16.JPG" alt="this is silva"></td>
        </tr>
        <tr id = "row2">
            <td class="focusable row2 col1 " tabindex="-1"><img src="images/Ssession/S21.JPG"></td>
            <td class="row2 col2" tabindex="-1" display="none">&nbsp;</td>
            <td class="focusable row2 col3 " tabindex="-1"><img src="images/Ssession/S23.JPG"></td>
            <td class="row2 col4" tabindex="-1" display="none">&nbsp;</td>
            <td class="row2 col5" tabindex="-1" display="none">&nbsp;</td>
            <td class="focusable row2 col6 " tabindex="-1"><img src="images/Ssession/S26.JPG"></td>
        </tr>
        <tr id = "row3">
        	<td class="row3 col1" tabindex="-1" display="none">&nbsp;</td>
        	<td class="row3 col2" tabindex="-1" display="none">&nbsp;</td>
            <td class="focusable row3 row4 row5 col3 " tabindex="-1" rowspan="3" headers="This is Silva">This is Silva<img src="images/Ssession/S33.JPG" alt="my name is silva"></td>
            <td class="focusable row3 col4 " tabindex="-1"><img src="images/Ssession/S34.JPG"></td>
            <td class="focusable row3 col5 " tabindex="-1"><img src="images/Ssession/S35.JPG"></td>
            <td class="row3 col6" tabindex="-1" display="none">&nbsp;</td>
        </tr>
        <tr id = "row4">
        	<td class="row4 col1" tabindex="-1" display="none">&nbsp;</td>
            <td class="row4 col2" tabindex="-1" display="none">&nbsp;</td>
            <td class="row4 col4" tabindex="-1" display="none">&nbsp;</td>
        	<td class="row4 col5" tabindex="-1" display="none">&nbsp;</td>
            <td class="row4 col6" tabindex="-1" display="none">&nbsp;</td>
        </tr>
        <tr id = "row5">
        	<td class="row5 col1" tabindex="-1" display="none">&nbsp;</td>
        	<td class="row5 col2" tabindex="-1" display="none">&nbsp;</td>
            <td class="focusable row5 col4 " tabindex="-1"><img src="images/Ssession/S54.JPG"></td>
            <td class="focusable row5 col5 " tabindex="-1"><img src="images/Ssession/S55.JPG"></td>
            <td class="row5 col6" tabindex="-1" display="none">&nbsp;</td>
        </tr>

		</table>
	</div>

	<!-- pager -->
	<nav>
	  <ul class="pager">
	    <li><a href="first-session.html">Previos</a></li>
	    <li><a href="debrief-session.html">  Next  </a></li>
	  </ul>
	</nav>
</div>


<!-- JQuery -->	
<script src="js/jquery.min.js"></script>
<!-- written code JavaScript <script type="text/Javascript" src="js/myscript.js"></script>
-->

<script>
	var nextstep = false, nextstepr = false;
	//table length
	var TLength = document.getElementById("uml").rows.length;
	// init
	$('.focused').focus();
	// actual code
	$(document).keydown(function(e){  
		var colmatches = 0, rowmatches = 0, x = 0, y = 0;
		var colArr = [], rowArr = [];
		myArray = $(".focused").attr("class").split(' ');
		for (var i in myArray) {
			if (myArray[i].includes("col")){
				colArr.push(myArray[i]);
				colmatches++;
			}
			if (myArray[i].includes("row")){
				rowArr.push(myArray[i]);
				rowmatches++;
			}
		}
	    if (e.keyCode == 37) { // left
	    	col = parseInt(colArr[0].match(/\d/g))-1; // col only number -1
	    	yy = parseInt(rowArr[0].match(/\d/g)); // row only number 
	        if(col != 0){ // checking only col and with zero because we are going left
	        	nextArray = $("td.col"+col+".row"+yy).attr("class").split(' ');
	    		window.alert(nextArray);
	 	        if (rowmatches == 1){
	 	        	if (nextArray.includes("focusable")) {
	 	        		active = $('td.focused').removeClass('focused');
						$("td.focusable.col"+col+".row"+yy).focus().addClass('focused');	
	 	        	} else {
	 	        		window.alert("No more elements on the left")
	 	        	}
					rowmatches = 0;
				}
				if (rowmatches == 2 || rowmatches == 3){	
					{
						var nextRowMatches = 0;
						for (var i in nextArray) {
							if (nextArray[i].includes("row") && nextArray[i].includes("focusable")){
								rowArr.push(nextArray[i]); // NEVER DELETE THIS, used in press 1 and 2
								window.alert(nextArray[i]);
								nextRowMatches++;
							}
						}
					}
					if(nextRowMatches == 2){
						$('td.focused').removeClass('focused');
						$("td.focusable.col"+col+".row"+yy).focus().addClass('focused');
						rowmatches = 0;
					}
					else{
						nextstepr = true;
						window.alert(" There are two elements to visit on the left please chose 1 or 2");
					}
					nextRowMatches = 0;
				}//end of rowmatches = 2 3            	
	        }
	        else{ // col = 0 does not exist
	        	window.alert("No more elements on the left")
	        }
	    }
	    if (e.keyCode == 39 ) { // right
	        if($('.focused').next('.focusable').length){
	        	if (rowmatches == 1){
					active = $('td.focused').removeClass('focused');
					col = parseInt(colArr[colArr.length-1].match(/\d/g))+1; // col only number +1
					yy = parseInt(rowArr[rowArr.length-1].match(/\d/g)); // row only number 
					$("td.focusable.col"+col+".row"+yy).focus().addClass('focused');
					//window.alert(" colmatches" +colmatches + "  y " + yy + "  x " + col + " colarr:"+colArr+"  rowarr:"+rowArr);
					rowmatches = 0;
					window.alert(col);
				}
				if (rowmatches == 2 || rowmatches == 3){	
					col = parseInt(colArr[colArr.length-1].match(/\d/g))+1; // col only number +1
					{
						yy = parseInt(rowArr[rowArr.length-1].match(/\d/g)); // row only number 
						var nextRowMatches = 0;
						nextArray = $("td.focusable.col"+col+".row"+yy).attr("class").split(' ');
						window.alert(nextArray)
						for (var i in nextArray) {
							if (nextArray[i].includes("row") && nextArray[i].includes("focusable")) {
								rowArr.push(nextArray[i]);
								nextRowMatches++;
							}
						}
						//window.alert(" colmatches" +colmatches + "  y " + yy + "  x " + col + " colarr:"+colArr+"  rowarr:"+rowArr);
					}
					window.alert(rowArr + "   "+ nextRowMatches);
					if(nextRowMatches == 2){
						$('td.focused').removeClass('focused');
						$("td.focusable.col"+col+".row"+yy).focus().addClass('focused');
						rowmatches = 0;
					}
					else {
						nextstepr = true;
						window.alert(" There are two elements to visit on the right please chose 1 or 2");
					}
					nextRowMatches = 0;
				}
	        }
	        else{
	        	window.alert("No more elements on the right")
	        }
	    }	    
	    //Up 38
	    if (e.keyCode == 38) {
	    	if (-1<$('td.focused').closest('tr').index()-1){
	    		if (colmatches == 1){
					active = $('td.focused').removeClass('focused');
					xx = parseInt(colArr[0].match(/\d/g)); // col only number
					yy = parseInt(rowArr[0].match(/\d/g))-1; // row only number -1
					$("td.focusable.col"+xx+".row"+yy).focus().addClass('focused');
					//window.alert(" colmatches" +colmatches + "  y " + yy + "  x " + xx+ " colarr:"+colArr+"  rowarr:"+rowArr);
					colmatches = 0;
				}
				if (colmatches == 2){
					row = parseInt(rowArr[0].match(/\d/g))-1; // row only number -1
					{
						var xx = parseInt(colArr[0].match(/\d/g)); // col only number
						var nextColmatches = 0;
						nextArray = $("td.focusable.col"+xx+".row"+row).attr("class").split(' ');
						for (var i in nextArray) {
							if (nextArray[i].includes("col")){
								colArr.push(nextArray[i]);
								nextColmatches++;
							}
						}
						//window.alert(" colmatches" +colmatches + "  y " + row + "  x " + xx + " colarr:"+colArr+"  rowarr:"+rowArr) ;
					}
					if (nextColmatches ==2){
						$('td.focused').removeClass('focused');
						$("td.focusable.col"+xx+".row"+row).focus().addClass('focused');
						colmatches = 0;
					}
					else{
						nextstep = true;
						window.alert(" There are two elements to visit above please chose 1 or 2");
					}
					nextColmatches = 0;
				}
	    	}
			else{
	        	window.alert("No more elements above")
	        } 
		}
	    //down 40
	    if (e.keyCode == 40) {
	    	if (TLength>$('td.focused').closest('tr').index()+1){
		    	if (colmatches == 1){
					active = $('td.focused').removeClass('focused');
					xx = parseInt(colArr[colArr.length-1].match(/\d/g)); // col only number
					yy = parseInt(rowArr[rowArr.length-1].match(/\d/g))+1; // row only number +1
					$("td.focusable.col"+xx+".row"+yy).focus().addClass('focused');
					//window.alert(" colmatches" +colmatches + "  y " + yy + "  x " + xx + " colarr:"+colArr+"  rowarr:"+rowArr);
					colmatches = 0;
				}
				if (colmatches == 2) {
					row = parseInt(rowArr[rowArr.length-1].match(/\d/g))+1; // row only number +1
					{
						var xx = parseInt(colArr[0].match(/\d/g)); // col only number
						var nextColmatches = 0;
						nextArray = $("td.focusable.col"+xx+".row"+row).attr("class").split(' ');
						for (var i in nextArray) {
							if (nextArray[i].includes("col")){
								colArr.push(nextArray[i]);
								nextColmatches++;
							}
						}
						//window.alert(" colmatches" +colmatches + "  y " + row + "  x " + xx + " colarr:"+colArr+"  rowarr:"+rowArr) ;
					}
					if (nextColmatches ==2){
						$('td.focused').removeClass('focused');
						$("td.focusable.col"+xx+".row"+row).focus().addClass('focused');
						colmatches = 0;
					}
					else{
						nextstep = true;
						window.alert(" There are two elements to visit below please chose 1 or 2");
					}
					nextColmatches = 0;	
				}
			}
			else{
	        	window.alert("No more elements down")
	        }
		}
		// 1 case there were two columns and user choose 1 , up and down
		if (e.keyCode == 49 &&  nextstep &&  !nextstepr){
			$('td.focused').removeClass('focused');
			var xx = parseInt(colArr[0].match(/\d/g)); // col only number
			$("td.focusable.col"+xx+".row"+row).focus().addClass('focused');
			//window.alert(" colmatches" +colmatches + "  y " + row + "  x " + xx + " colarr:"+colArr+"  rowarr:"+rowArr) ;
			colmatches = 0;
			nextstep = false;
			nextstepr = false;
		}
		// 2 case there were two columns and user choose 2 , up and down
		if (e.keyCode == 50 &&  nextstep &&  !nextstepr){
			$('td.focused').removeClass('focused');
			var xx = parseInt(colArr[colArr.length-1].match(/\d/g)); // col only number
			$("td.focusable.col"+xx+".row"+row).focus().addClass('focused');
			//window.alert(" colmatches" +colmatches + "  y " + row + "  x " + xx + " colarr:"+colArr+"  rowarr:"+rowArr) ;
			colmatches = 0;
			nextstep = false;
			nextstepr = false;
		}
		// 1 case there were two rows and user choose 1 , left and write
		if (e.keyCode == 49 && !nextstep && nextstepr){
			$('td.focused').removeClass('focused');
			var yy = parseInt(rowArr[0].match(/\d/g)); // row only number
			$("td.focusable.col"+col+".row"+yy).focus().addClass('focused');
			//window.alert(" jnfjdsfjkscolmatches" +colmatches + "  y " + yy + "  x " + col + " colarr:"+colArr+"  rowarr:"+rowArr[0].match(/\d/g)) ;
			rowmatches = 0;
			nextstep = false;
			nextstepr = false;
		}
		// 2 case there were two rows and user choose 2 , left and write
		if (e.keyCode == 50 &&  !nextstep &&  nextstepr){
			$('td.focused').removeClass('focused');
			var yy = parseInt(rowArr[rowArr.length-1].match(/\d/g)); // row only number
			$("td.focusable.col"+col+".row"+yy).focus().addClass('focused');
			//window.alert(" colmatches" +colmatches + "  y " + yy + "  x " + col + " colarr:"+colArr+"  rowarr:"+rowArr) ;
			rowmatches = 0;
			nextstep = false;
			nextstepr = false;
		}
	});
	// extra mouse over
	$('td').mouseover(function () {
	    $(this).siblings().css('background-color', '#EAD575');
	    var ind = $(this).index();
	    $('td:nth-child(' + (ind + 1) + ')').css('background-color', '#EAD575');
	});
	$('td').mouseleave(function () {
	    $(this).siblings().css('background-color', '');
	    var ind = $(this).index();
	    $('td:nth-child(' + (ind + 1) + ')').css('background-color', '');
	});






</script>

<!-- Minified JavaScript -->
<script src="js/bootstrap.min.js"></script>
<!-- my JavaScript -->
<script src="js/script.js"></script>
</body>
</html>